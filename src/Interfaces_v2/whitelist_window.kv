#:import Toolbar kivymd.toolbar.Toolbar
#:import MDCard kivymd.card.MDCard
#:import MDList kivymd.list.MDList
#:include nav_drawer.kv

# Whitelist screen layout.
<whitelist_window>:
    on_pre_enter: root.add_table(ip_table)
    BoxLayout:
        orientation: 'vertical'
        Toolbar:
            id: toolbar
            title: 'Defendr'
            background_color: app.theme_cls.primary_dark
            left_action_items: [['menu', lambda x: app.nav_drawer.toggle()]]
        GridLayout:
            cols:2
            padding: '45dp'
            spacing: '10dp'
            GridLayout:
                rows: 2
                GridLayout:
                    cols:2
                    size_hint_y: 0.3
                    size_hint_x: 0.7
                    padding_y:['90dp','30dp']
                    padding_x:['60dp','60dp']
                    spacing: '5dp'
                    GridLayout:
                        cols:2
                        padding_y:['90dp','30dp']
                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_x: 0.5
                            spacing: '30dp'
                            MDLabel:
                                theme_text_color: 'Primary'
                                text: "IP Whitelist"
                                font_size: 22
                                halign: 'left'
                                size_hint_x:0.4
                            BoxLayout:
                                orientation: 'horizontal'
                                size_hint_y: None
                                height: '40dp'
                                spacing: '20dp'
                                TextInput:
                                    id: txt_ip_addr
                                    multiline:False
                                    font_size: 18
                                    size_hint_x:0.8
                                    hint_text: 'IP Address'
                            BoxLayout:
                                spacing: '15dp'
                                orientation: 'horizontal'
                                Label:
                                    size_hint_x: 0.3
                                Button:
                                    text: 'Add'
                                    font_size: 22
                                    size_hint_x: 0.3
                                    on_release: root.add_IP(txt_ip_addr.text)
                                Button:
                                    text: 'Remove IP'
                                    size_hint_x: 0.3
                                    font_size: 16
                                    on_press: root.remove_IP(txt_ip_addr.text)
                        BoxLayout:
                            orientation: 'vertical'
                            size_hint_x: 0.5
                Label:
                    size_hint_y: 0.7
            GridLayout:
                rows: 2
                padding: '10dp'
                spacing: '5dp'
                size_hint_x: 0.3
                BoxLayout:
                    orientation: 'horizontal'
                    id: ip_table
                    size_hint_y:0.85
                BoxLayout:
                    orientation: 'horizontal'
                    padding: '10dp'
                    spacing: '10dp'
                    size_hint_y:0.15
                    Button:
                        text: 'Refresh'
                        size_hint_x:None
                        width:'125dp'
                        font_size: 16
                        on_press: root.add_table(ip_table)